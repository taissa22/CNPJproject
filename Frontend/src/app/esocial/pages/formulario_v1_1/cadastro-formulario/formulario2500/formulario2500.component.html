<app-container-pagina>
  <div id="page-grid" #pageGrid>
    <div class="header">
      <div class="roxo-padrao cabecalho">
        <h4 class="mb-0">Preenchimento do Formulário 2500 para o eSocial</h4>
        <div (click)="voltar(true)">
          <i class="fa fa-angle-double-left"></i> Voltar
        </div>
      </div>

      <div class="card-head mt-3" *ngIf="pesquisaProcesso">
        <div class="d-flex">
          <b>{{ pesquisaProcesso.nomeParte }}
            {{ parseString(pesquisaProcesso.cpfParte) | cpfCnpj }}</b>
            <div class="ml-auto status-finalizacoes" id="status-finalizacoes">
              <div id="status-finalizado-contador" class="status-finalizacoes">
                <span>Contador: </span>
                <ng-template *ngTemplateOutlet="iconeCheckContador"></ng-template>
              </div>
              <span class="mr-1 ml-1">|</span>
              <div id="status-finalizado-escritorio" class="status-finalizacoes">
                <span>Escritório: </span>
                <ng-template *ngTemplateOutlet="iconeCheckEscritorio"></ng-template>
              </div>
            </div>
          <div class="tag-status ml-4 p-1 pl-2 pr-2"
            [ngStyle]="{'color': pesquisaProcesso.statusFormulario == 0 ? 'black' : 'white', 'background-color':defineCorTagStatusFormulario(pesquisaProcesso.statusFormulario),
                          'border-color': pesquisaProcesso.statusFormulario == 0 ? 'black' : defineCorTagStatusFormulario(pesquisaProcesso.statusFormulario)}"
            style="border-radius: 5px">
            {{ obtemDescricaoStatus(pesquisaProcesso.statusFormulario) }}
          </div>
        </div>
        <div class="d-flex">
          <ng-template [ngTemplateOutlet]="cabecalhoProcesso"></ng-template>
          <ng-template [ngTemplateOutlet]="textoLog"></ng-template>
        </div>
      </div>
      <div class="btn-head mt-3 mb-3" style="display: flex; justify-content: flex-end; align-items: end">
        <p *ngIf="temPermissaoLimparFormulario && !modoConsulta" class="mb-0 limparFormulario roxo-padrao mr-auto"
          (click)="limparFormulario2500()">
          Limpar Formulário
        </p>
        <ng-template *ngTemplateOutlet="botoesSalvarEFinalizar"></ng-template>
      </div>
    </div>


    <div class="grid-cadastro mt-4" #gridCadastro id="grid-cadastro">
      <div class="roxo-padrao pt-2 pb-2" style="display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between;">
        <div></div>
        <div class="header-numero-versao">
          <h4 class="header-f2500">{{'FORMULÁRIO 2500'+ (ideeventoIndretifFormControl.value == 2 ? ' - RETIFICAÇÃO' : '') }}</h4>
          <h6 class="versao-esocial">{{'ID '+ idF2500+' (versão 1.1)'}}</h6>
        </div>
        <button type="button" class="btn btn-link btn-download-manual p-0" [ngbTooltip]="downloadManual" tooltipClass="tooltip-download-manual" triggers="click"
          [autoClose]="'outside'"> <i class="fas fa-info-circle ml-auto roxo-padrao" style="font-size:16px;"></i> </button>
        <ng-template #downloadManual>
          <a [href]="getPdfUrl()" download class="font-purple btn-link btn-text-cursor">
            <span class="roxo-padrao" style="font-size:13px;"><i class="fas fa-download pr-1"></i>Manual de
              preenchimento</span>
          </a>
        </ng-template>
      </div>

      <form [formGroup]="formulario2500" *ngIf="formulario2500" class="quadros pb-5">
        <!-- QUADRO A -->
        <div class="quadro-a" style="border: 1px solid #ccc">
          <div>
            <h4 class="roxo-padrao title mb-0" style="width: 150px">Identificação (A)</h4>
          </div>
          <div class="grid-quadro">
            <div style="width: 47%">
              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="finalidadeRegistro"><b>Finalidade do Registro:</b></label>
                <ng-select style="width: 30rem" class="disabled form-control form-control-select" [disabled]="true"
                  id="finalidadeRegistro" [tabIndex]="1" [items]="finalidadeRegistroList"
                  [formControl]="ideeventoIndretifFormControl" bindLabel="descricao" bindValue="id"></ng-select>
              </div>

              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="nProcessoDemanda"><b>Número do Processo/Demanda:</b></label>
                <input style="width: 30rem" class="form-control" type="text" (change)="ajustaNumeroProcesso($event)"
                  id="nProcessoDemanda" tabindex="3" [formControl]="infoprocessoNrproctrabFormControl"
                  [disableTooltip]="desabilitaTooltip(infoprocessoNrproctrabFormControl)"
                  [ngbTooltip]="validacaoNroProcesso" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
              </div>
              <ng-template #validacaoNroProcesso>
                <span *ngIf="
                                                                                                          infoprocessoNrproctrabFormControl.invalid &&
                                                                                                          infoprocessoNrproctrabFormControl.hasError('maxlength')
                                                                                                          ">
                  O número do processo não pode conter mais que 20 algarismos.
                </span>
                <span *ngIf="
                                                                            infoprocessoNrproctrabFormControl.invalid &&
                                                                            infoprocessoNrproctrabFormControl.hasError('required')
                                                                          ">
                  Campo obrigatório
                </span>
                <span *ngIf="
                                                                          infoprocessoNrproctrabFormControl.invalid &&
                                                                          infoprocessoNrproctrabFormControl.hasError('minlength')
                                                                          ">
                  O número do processo deve conter 20 algarismos.
                </span>
              </ng-template>

              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="cpfTrabalhador"><b>CPF do Trabalhador:</b></label>
                <input class="form-control" style="width: 30rem" type="text" id="cpfTrabalhador" tabindex="5"
                  [formControl]="idetrabCpftrabFormControl" [textMask]="{ mask: mascaraCpf }"
                  [disableTooltip]="desabilitaTooltip(idetrabCpftrabFormControl)"
                  [ngbTooltip]="validacaoIdetrabCpftrab" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
              </div>
              <ng-template #validacaoIdetrabCpftrab>
                <span
                  *ngIf="
                                                                                                                    idetrabCpftrabFormControl.invalid &&
                                                                                                                    idetrabCpftrabFormControl.hasError('required')
                                                                                                                                                                                      ">
                  CPF obrigatório.
                </span>
                <span
                  *ngIf="
                                                                                                                    idetrabCpftrabFormControl.invalid &&
                                                                                                                    idetrabCpftrabFormControl.hasError('cpfNotValid')
                                                                                                                                                                                      ">
                  CPF inválido.
                </span>
              </ng-template>

              <div class="d-flex mt-4" style="flex-direction: column">
                <label for="nomeTrabalhador"><b>Nome do Trabalhador:</b></label>
                <input style="width: 30rem; padding-left: 0.5rem" class="form-control" type="text" maxlength="70"
                  id="nomeTrabalhador" tabindex="6" [formControl]="idetrabNmtrabFormControl"
                  [disableTooltip]="desabilitaTooltip(idetrabNmtrabFormControl)"
                  [ngbTooltip]="validacaoNomeTrabalhador" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
              </div>
              <ng-template #validacaoNomeTrabalhador>
                <span *ngIf="
                idetrabNmtrabFormControl.invalid &&
                idetrabNmtrabFormControl.hasError('minlength')
                                                                          ">
                  Informe pelo menos 2 caracteres.
                </span>
              </ng-template>
              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="tipoInscricaoContribuinte" class="tooltip-insc"><b>Tipo e Número de Inscrição do Empregador ou Contribuinte:</b><i title="{{tooltipEmpregContrib}}" class=" roxo-padrao fa fa-info-circle"></i></label>
                <div style="display: flex;">
                  <div style="width: 8rem; display: flex; align-items: center;">
                    <ng-select style="width: 8rem" id="tipoInscricaoContribuinte" [tabIndex]="8" class="disabled"
                      [disabled]="true" bindLabel="descricao" bindValue="id" [formControl]="ideempregadorTpinscFormControl"
                      (change)="
                        changeInscricao(
                          ideempregadorTpinscFormControl,
                          ideempregadorNrinscFormControl,
                          'empregador'
                        )
                      " [items]="tipoInscricaoContribuinteList"></ng-select>
                  </div>
                  <div style="width: 21rem; display: flex; align-items: center; margin-left: 1rem;">
                    <input class="form-control" style="width: 21rem" type="text" id="nInscricaoContribuinte" tabindex="9"
                    [textMask]=" { mask: mascaraNrIncEmpregador } " [formControl]="ideempregadorNrinscFormControl"
                    [disableTooltip]="desabilitaTooltip(ideempregadorNrinscFormControl)"
                    [ngbTooltip]="validacaoNroInscEmpregador" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"
                    [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
                  </div>
                </div>
              </div>
              <ng-template #validacaoNroInscEmpregador>
                <span
                  *ngIf="
                                                                                                                    ideempregadorNrinscFormControl.invalid &&
                                                                                                                    ideempregadorNrinscFormControl.hasError('required')
                                                                                                                                                                              ">
                  Campo obrigatório.
                </span>
                <span
                  *ngIf="
                                                                                                                    ideempregadorNrinscFormControl.invalid &&
                                                                                                                    ideempregadorNrinscFormControl.hasError('nrInscricaoDuplicado')
                                                                                                                                                                              ">
                  CNPJ do empregador deve ser diferente do CNPJ do responsável.
                </span>
                <span
                  *ngIf="
                                                                                                      ideempregadorNrinscFormControl.invalid &&
                                                                                                      ideempregadorNrinscFormControl.hasError('cnpjNotValid')
                                                                                                                                                                ">
                  CNPJ inválido.
                </span>
              </ng-template>

            </div>

            <div style="width: 47%">
              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="origemProcessoDemanda"><b>Origem do Processo/Demanda:</b></label>
                <ng-select style="width: 30rem" class="disabled" [disabled]="true" id="origemProcessoDemanda"
                  [items]="origemProcessoDemandaList" bindLabel="descricao" bindValue="id" [tabIndex]="2"
                  [formControl]="infoprocessoOrigemFormControl"></ng-select>
              </div>

              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="obsProcessoDemanda"><b>Observação do Processo/Demanda:</b></label>
                <textarea class="form-control" id="obsProcessoDemanda" #obs (keyup)="calculaTamanho(obs.value, 'obs')" maxlength="999"
                  rows="4" cols="50" tabindex="4" [formControl]="infoprocessoObsproctrabFormControl" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"></textarea>
                <span class="ml-auto">{{ totalCaracterObs }}/999</span>
              </div>

              <div class="d-flex" style="flex-direction: column">
                <label for="dataNascTrabalhador"><b>Data de Nascimento do Trabalhador:</b></label>
                <div class="form-group" [class.disabled]="idetrabDtnasctoFormControl.disabled">
                  <div class="form-inline input-group input-date" id="component-data">
                    <input type="text" class="form-control form-control-sm input-date" placeholder="DD/MM/AAAA"
                      rInputMask="99/99/9999" [bsConfig]="{ showWeekNumbers: false, dateInputFormat: 'DD/MM/YYYY' }" name="idetrabDtnascto"
                      id="idetrabDtnascto" [formControl]="idetrabDtnasctoFormControl" bsDatepicker [maxDate]="dataAtual"
                      [minDate]="dataNascimentoMinima" #idetrabDtnascto="bsDatepicker"
                      placement="top-left top-right bottom-left bottom-right"
                      [disableTooltip]="desabilitaTooltip(idetrabDtnasctoFormControl)"
                      [ngbTooltip]="validacaoDataNascimento" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
                    <div class="input-group-append">
                      <button type="button" class="btn btn btn-outline-secondary calendar"
                        (click)="idetrabDtnascto.toggle()" [attr.aria-expanded]="idetrabDtnascto.isOpen"
                        [disabled]="idetrabDtnasctoFormControl.disabled">
                        <i class="fa-solid fa-calendar-days"></i>
                      </button>
                    </div>
                    <ng-template #validacaoDataNascimento>
                      <span *ngIf="
                          idetrabDtnasctoFormControl.invalid &&
                          idetrabDtnasctoFormControl.errors.validDate
                        ">
                        Data inválida
                      </span>
                      <span *ngIf="
                          idetrabDtnasctoFormControl.invalid &&
                          idetrabDtnasctoFormControl.errors.bsDate &&
                          idetrabDtnasctoFormControl.errors.bsDate.invalid
                        ">
                        Data inválida
                      </span>
                      <span
                        *ngIf="
                                                idetrabDtnasctoFormControl.invalid &&
                                                idetrabDtnasctoFormControl.errors.bsDate?.minDate
                                                                                                                          ">
                        A data informada deve ser maior do que 01/01/1890.
                      </span>
                      <span *ngIf="
                                                    idetrabDtnasctoFormControl.invalid &&
                                                    idetrabDtnasctoFormControl.errors.bsDate?.maxDate
                                                                                                          ">
                        A data informada deve ser menor ou igual a data atual.
                      </span>
                    </ng-template>
                  </div>
                </div>
              </div>

              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="nInscricaoContribuinte" class="tooltip-insc"><b>Tipo e Número de Inscrição do Responsável (Real Empregador):</b><i title="{{tooltipResp}}" class=" roxo-padrao fa fa-info-circle"></i></label>
                <div style="display: flex;">
                  <div style="width: 8rem; display: flex; align-items: center;">
                  <ng-select style="width: 8rem" class="form-control form-control-select" id="tipoInscricaoContribuinte"
                    (change)="ajustaValidadoresIdeResp('tipo')" [tabIndex]="10" bindLabel="descricao" bindValue="id"
                    [formControl]="iderespTpinscFormControl" (change)="
                      changeInscricao(
                        iderespTpinscFormControl,
                        iderespNrinscFormControl,
                        'responsavel'
                      )
                    " [items]="tipoInscricaoContribuinteList"
                    [disableTooltip]="desabilitaTooltip(iderespTpinscFormControl)"
                    [ngbTooltip]="validacaoTpInscResp" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"
                    [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"></ng-select>
                  </div>
                  <div style="width: 21rem; display: flex; align-items: center; margin-left: 1rem;">
                  <input style="width: 21rem" class="form-control" type="text" id="nInscricaoContribuinte" tabindex="11"
                    (change)="ajustaValidadoresIdeResp()" [textMask]="{ mask: mascaraNrIncResponsavel }"
                    [formControl]="iderespNrinscFormControl"
                    [disableTooltip]="desabilitaTooltip(iderespNrinscFormControl)"
                    [ngbTooltip]="validacaoNroInscResp" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"
                    [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
                  </div>
                </div>
              </div>
              <ng-template #validacaoTpInscResp>
                <span *ngIf="iderespTpinscFormControl.invalid && iderespTpinscFormControl.hasError('required')">
                  O campo 'tipo de inscrição do responsável' é obrigatório, caso o Nro. de inscrição do responsável
                  esteja preenchido.
                </span>
              </ng-template>

              <ng-template #validacaoNroInscResp>
                <span *ngIf="iderespNrinscFormControl.invalid && iderespNrinscFormControl.hasError('required')">
                  O campo 'número de inscrição do responsável' é obrigatório, caso o tipo de inscrição do responsável
                  esteja preenchido.
                </span>
                <span *ngIf="
                  iderespNrinscFormControl.invalid && iderespNrinscFormControl.hasError('nrInscricaoDuplicado')">
                  CNPJ do responsável deve ser diferente do CNPJ do empregador.
                </span>
                <span
                  *ngIf="
                                                                                                                iderespNrinscFormControl.invalid &&
                                                                                                                iderespNrinscFormControl.hasError('cnpjNotValid') ">
                  CNPJ inválido.
                </span>
                <span
                  *ngIf="
                                                                                                                                iderespNrinscFormControl.invalid &&
                                                                                                                                iderespNrinscFormControl.hasError('cpfNotValid') ">
                  CPF inválido.
                </span>
              </ng-template>
            </div>
          </div>
        </div>

        <!-- QUADRO B -->
        <div class="quadro-b" style="border: 1px solid #ccc; border-top: none">
          <div>
            <h4 class="roxo-padrao title mb-0" style="width: 295px">
              Informações Complementares (B)
            </h4>
          </div>
          <div class="grid-quadro">
            <div style="width: 47%">
              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="dataSentencaHomologacaoProcessoJudicial" class="tooltip-data-sentenca"><b>Data da Sentença ou Homologação do Acordo do
                    Processo
                    Judicial:</b><i title="{{tooltipDataSentenca}}" class=" roxo-padrao fa fa-info-circle"></i></label>
                <div class="form-group" [class.disabled]="infoprocjudDtsentFormControl.disabled">
                  <div class="form-inline input-group input-date" id="component-data">
                    <input type="text" class="form-control form-control-sm input-date" placeholder="DD/MM/AAAA"
                      rInputMask="99/99/9999" [bsConfig]="{ showWeekNumbers: false }" name="infoprocjudDtsent"
                      id="infoprocjudDtsent" [formControl]="infoprocjudDtsentFormControl" bsDatepicker
                      [maxDate]="dataAtual" #infoprocjudDtsent="bsDatepicker"
                      placement="top-left top-right bottom-left bottom-right"
                      [disableTooltip]="desabilitaTooltip(infoprocjudDtsentFormControl)"
                      [ngbTooltip]="validacaoDataSentenca" required [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
                    <div class="input-group-append">
                      <button type="button" class="btn btn btn-outline-secondary calendar"
                        (click)="infoprocjudDtsent.toggle()" [attr.aria-expanded]="infoprocjudDtsent.isOpen"
                        [disabled]="infoprocjudDtsentFormControl.disabled">
                        <i class="fa-solid fa-calendar-days"></i>
                      </button>
                    </div>
                    <ng-template #validacaoDataSentenca>
                      <span *ngIf="
                          infoprocjudDtsentFormControl.invalid &&
                          infoprocjudDtsentFormControl.hasError('required')
                        ">
                        Campo obrigatório.
                      </span>
                      <span *ngIf="
                          infoprocjudDtsentFormControl.invalid &&
                          infoprocjudDtsentFormControl.errors.validDate
                        ">
                        Data inválida
                      </span>
                      <span *ngIf="
                          infoprocjudDtsentFormControl.invalid &&
                          infoprocjudDtsentFormControl.errors.bsDate &&
                          infoprocjudDtsentFormControl.errors.bsDate.invalid
                        ">
                        Data inválida
                      </span>
                      <span *ngIf="
                                                            infoprocjudDtsentFormControl.invalid &&
                                                            infoprocjudDtsentFormControl.errors.bsDate?.maxDate
                                                                                                                  ">
                        A data informada deve ser menor ou igual a data atual.
                      </span>
                    </ng-template>
                  </div>
                </div>
              </div>
              <div class="d-flex mt-3" style="flex-direction: column">
                <label for="codigoMunicipio" class="tooltip-insc"><b>Código do Município:</b> <i title="{{tooltipMunicipio}}" class=" roxo-padrao fa fa-info-circle"></i></label>
                <ng-select class="form-control form-control-select" style="width: 30rem" id="judCodmunicFormControl"
                  [tabIndex]="12" bindLabel="descricaoConcat" bindValue="id"
                  [formControl]="infoprocjudCodmunicFormControl" [items]="codigoMuncipioList"
                  [disableTooltip]="desabilitaTooltip(infoprocjudCodmunicFormControl)"
                  [ngbTooltip]="validacaoCodMun" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"></ng-select>
              </div>
              <ng-template #validacaoCodMun>
                <span
                  *ngIf="
                                                                                                infoprocjudCodmunicFormControl.invalid &&
                                                                                                infoprocjudCodmunicFormControl.hasError('required')
                                                                                                                                                                                                    ">
                  Campo obrigatório.
                </span>
              </ng-template>
            </div>
            <div style="width: 47%">
              <div class="d-flex mt-2" style="flex-direction: column">
                <label for="ufVaraTramitacaoProcessoJudicial" class="tooltip-insc"><b>UF Vara de Tramitação de Processo Judicial:</b><i title="{{tooltipUfTramitacao}}" class=" roxo-padrao fa fa-info-circle"></i></label>
                <ng-select class="form-control form-control-select" style="width: 30rem"
                  id="ufVaraTramitacaoProcessoJudicial" [tabIndex]="11" bindLabel="descricaoConcat" bindValue="id"
                  [formControl]="infoprocjudUfvaraFormControl" [items]="ufVaraTramitacaoProcessoJudicialList"
                  (change)="ufVaraChange($event.id)"
                  [disableTooltip]="desabilitaTooltip(infoprocjudUfvaraFormControl)"
                  [ngbTooltip]="validacaoUfVara" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"></ng-select>
              </div>
              <ng-template #validacaoUfVara>
                <span
                  *ngIf="
                                                                                                                                                                            infoprocjudUfvaraFormControl.invalid &&
                                                                                                                                                                            infoprocjudUfvaraFormControl.hasError('required')
                                                                                                                                                                                                                                                                                                          ">
                  Campo obrigatório.
                </span>
              </ng-template>

              <div class="d-flex mt-3" style="flex-direction: column">
                <label for="identificacaoVara"><b>Identificação da Vara:</b></label>
                <input class="form-control" style="width: 20rem" type="text" maxlength="4" id="identificacaoVara"
                  tabIndex="13" [formControl]="infoprocjudIdvaraFormControl"
                  oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1')"
                  [disableTooltip]="infoprocjudIdvaraFormControl.valid || infoprocjudIdvaraFormControl.untouched"
                  [ngbTooltip]="validacaoIdVara" [disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)" [class.disabled]="!temPermissaoEsocialBlocoABCDEFHI || modoConsulta || (finalizadoEscritorio && !temPermissaoEnviarEsocial)"/>
              </div>
              <ng-template #validacaoIdVara>
                <span
                  *ngIf="
                                                                                      infoprocjudIdvaraFormControl.invalid &&
                                                                                      infoprocjudIdvaraFormControl.hasError('required')
                                                                                                                                                                                                                    ">
                  Campo obrigatório.
                </span>
              </ng-template>
            </div>
          </div>
        </div>

        <!-- QUADRO C -->
        <div class="quadro-c" style="border: 1px solid #ccc; border-top: none">
          <div>
            <h4 class="roxo-padrao title mb-0" style="width: 155px">Dependentes (C)</h4>
          </div>
          <div class="grid-quadro">
            <app-esocial-dependente-subgrupo *ngIf="dadosFormulario" class="grid" [formularioId]="idF2500" (aoAbrirPopup)="salvarComoRascunho(false, true, false)"
              (carregado)="setHeight($event)" [temPermissaoEsocialBlocoABCDEFHI]="temPermissaoEsocialBlocoABCDEFHI && !modoConsulta && (!finalizadoEscritorio || (finalizadoEscritorio && temPermissaoEnviarEsocial))"></app-esocial-dependente-subgrupo>
          </div>
        </div>

        <!-- QUADRO D -->
        <div class="quadro-d" style="border: 1px solid #ccc; border-top: none">
          <div>
            <h4 class="roxo-padrao title mb-0" style="width: 370px">
              Contrato de Trabalho e Término de TSVE (D)
            </h4>
          </div>
          <div class="grid-quadro">
            <app-esocial-contrato-subgrupo *ngIf="dadosFormulario" class="grid" [formularioId]="idF2500"
              [podeValidar]="podeValidar"
              [salvarRascunho]="salvarRascunho"
              [salvarEEnviar]="salvarEEnviar"
              [finalizarEscritorio]="finalizarEscritorio"
              [finalizarContador]="finalizarContador"
              [finalizadoEscritorio]="finalizadoEscritorio"
              [finalizadoContador]="finalizadoContador"
              (aoFinalizarEscritorio)="finalizaEscritorioCallback($event)"
              (aoFinalizarContador)="finalizaContadorCallback($event)"
              (aoValidarContratosSubgrupos)="validaContratosSubgrupos($event)"
              (aoSalvarRascunho)="salvaRascunhoFormularioCallback($event)"
              (aoSalvarEEnviar)="salvaFormularioEEnviaCallback($event)"
              (aoAbrirPopup)="salvarComoRascunho(false, true, false)"
              [ideempregadorTpinsc]="ideempregadorTpinscFormControl"
              (aoRetornarQtdContratos)="quantidadeContratos = $event"
              (carregado)="setHeight($event)"
              [temPermissaoEnviarEsocial]="temPermissaoEnviarEsocial"
              [temPermissaoEsocialBlocoABCDEFHI]="temPermissaoEsocialBlocoABCDEFHI && !modoConsulta"
              [temPermissaoEsocialBlocoGK]="temPermissaoEsocialBlocoGK && !modoConsulta "
              [temPermissaoEsocialBlocoJDadosEstabelecimento]="temPermissaoEsocialBlocoJDadosEstabelecimento && !modoConsulta"
              [temPermissaoEsocialBlocoJValores]="temPermissaoEsocialBlocoJValores && !modoConsulta"
              [contratoTerceiro]="contratoTerceiro"
              ></app-esocial-contrato-subgrupo>
          </div>
        </div>
      </form>
    </div>
  </div>

  <ng-template #iconeCheckEscritorio>
    <svg xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="white" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoEscritorio == null">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
    <svg xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="#a1dea7" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoEscritorio == true">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
    <svg  xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="#fefe0a" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoEscritorio == false">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
  </ng-template>

  <ng-template #iconeCheckContador>
    <svg  xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="white" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoContador == null">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
    <svg  xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="#a1dea7" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoContador == true">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
    <svg  xmlns="src\assets\icons\check-circle-fill.svg" width="13" height="13" fill="#fefe0a" class="svg-check" viewBox="0 0 16 16" *ngIf="finalizadoContador == false">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
    </svg>
  </ng-template>

  <ng-template #botoesSalvarEFinalizar>
    <button class="btn btn-primary" (click)="salvarComoRascunho()" *ngIf="!modoConsulta && (temPermissaoEnviarEsocial ||
                                        (temPermissaoFinalizarContadorF2500 && !finalizadoContador) ||
                                        (!temPermissaoFinalizarContadorF2500 && (temPermissaoEsocialBlocoGK || temPermissaoEsocialBlocoJValores) && !finalizadoContador) ||
                                        (temPermissaoFinalizarEscritorioF2500 && !finalizadoEscritorio) ||
                                        (!temPermissaoFinalizarEscritorioF2500 && (temPermissaoEsocialBlocoABCDEFHI || temPermissaoEsocialBlocoJDadosEstabelecimento) && !finalizadoEscritorio))">
      Salvar como Rascunho
    </button>
    <button class="btn btn-primary ml-3" (click)="validaFinalizacaoEscritorio()" *ngIf="!modoConsulta && !temPermissaoEnviarEsocial && temPermissaoFinalizarEscritorioF2500 && !finalizadoEscritorio">
      Finalizar Preenchimento Escritório
    </button>
    <button class="btn btn-primary ml-3" (click)="validaFinalizacaoEscritorio()" *ngIf="!modoConsulta && (temPermissaoEnviarEsocial || temPermissaoFinalizarEscritorioF2500) && finalizadoEscritorio">
      Reabrir Preenchimento Escritório
    </button>
    <button class="btn btn-primary ml-3" (click)="validaFinalizacaoContador()" *ngIf="!modoConsulta && !temPermissaoEnviarEsocial && temPermissaoFinalizarContadorF2500 && !finalizadoContador">
      Finalizar Preenchimento Contador
    </button>
    <button class="btn btn-primary ml-3" (click)="validaFinalizacaoContador()" *ngIf="!modoConsulta && (temPermissaoEnviarEsocial || temPermissaoFinalizarContadorF2500) && finalizadoContador">
      Reabrir Preenchimento Contador
    </button>
    <button class="btn btn-primary ml-3" (click)="salvarParaEnvio()" *ngIf="!modoConsulta && temPermissaoEnviarEsocial">
      Salvar e Enviar
    </button>
    <div class="roxo-padrao pt-2 pb-2" style="display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between;">
      <div></div>
      <div class="row-card-grid mt-1 pr-3">
        <span *ngIf="nrReciboExclusao != null && nrReciboExclusao != '' && modoConsulta" class="btn-link" style="cursor: auto; text-decoration: none; font-size: 14px;">
          <span style="font-weight: bold; font-size: 14px;">Nº Recibo Exclusão: </span>{{nrReciboExclusao}}</span>
      </div>
      <div class="row-card-grid mt-1">
        <span *ngIf="nrRecibo != null && nrRecibo != '' && modoConsulta" class="btn-link" style="cursor: auto; text-decoration: none; font-size: 14px;">
          <span style="font-weight: bold; font-size: 14px;">Nº Recibo: </span>{{nrRecibo}}</span>
      </div>
    </div>
  </ng-template>

  <ng-template #cabecalhoProcesso>
    <span>
      Processo: {{ pesquisaProcesso.nroProcessoCartorio }} |
      {{ pesquisaProcesso.ufVara }} - {{ pesquisaProcesso.nomeComarca }} |
      {{ pesquisaProcesso.nomeVara }} <br />
      {{ pesquisaProcesso.indAtivo }} |
      {{ pesquisaProcesso.nomeEmpresaGrupo }} |
      {{ pesquisaProcesso.indProprioTerceiro }} | Código Interno:
      {{ pesquisaProcesso.codProcesso }}
    </span>
  </ng-template>

  <ng-template #textoLog>
    <span class="ml-auto" style="text-align: end" *ngIf="pesquisaProcesso.statusFormulario != 0">
      {{salvoAutomaticamente ? 'Rascunho salvo automaticamente em' : 'Última atualização em'}}
      {{ pesquisaProcesso.logDataOperacaoFormatada }}
      <br />
      por {{ pesquisaProcesso.nomeUsuario }}
    </span>
  </ng-template>


</app-container-pagina>
